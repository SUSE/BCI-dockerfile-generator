FileProvides: /bin/login util-linux
FileProvides: /usr/bin/perl perl-base
FileProvides: /usr/bin/sed sed
FileProvides: /usr/bin/find findutils

Prefer: -libcontainers-openSUSE-policy

%if "%_repository" == "images"
Type: kiwi
Repotype: none
Patterntype: none

Prefer: -libcurl4-mini
Prefer: -systemd-mini
Prefer: -libsystemd0-mini
Prefer: -libudev-mini1
Prefer: -udev-mini
Prefer: kiwi-boot-requires
Prefer: sles-release
Prefer: python3-kiwi

# needed for busybox image building (at minimum)
ExpandFlags: kiwi-nobasepackages

# needed for micro image
Prefer: -busybox-coreutils

Preinstall: !rpm rpm-ndb
Substitute: rpm rpm-ndb
Binarytype: rpm
%else
%if %_repository == "containerfile"
Type: docker
Prefer: sles-release
PreInstall: release-compare

%else
%if %_repository == "helmcharts"
Type: helm
#Prefer: sles-release
PreInstall: release-compare perl-YAML-LibYAML
%else
Type: spec
Repotype: none
Patterntype: none
%endif
%endif
%endif

#
# OBS specific settings
#

# SBOM CHANGES
BuildFlags: sbom:cyclonedx
BuildFlags: sbom:spdx
PublishFlags: withsbom
Substitute: system-packages:podman kmod kernel-default podman buildah createrepo_c umoci skopeo 
Substitute: system-packages:docker docker kmod-compat sysvinit-tools kernel-default createrepo_c umoci skopeo 
# END SBOM CHANGES

# prefer the released containers
Prefer: -container:micro-image
Prefer: -container:sles15-image
